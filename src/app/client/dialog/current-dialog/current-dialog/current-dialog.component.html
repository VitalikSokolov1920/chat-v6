<div *ngIf="otherUser" class="user-info" [routerLink]="['/client/client-page', otherUser.id]">
  <img alt="Фото" [src]="otherUser.image" class="user-info__image"/>
  <div class="user-info__name">
    {{fullName}}
  </div>
</div>
<div class="dialog-container">
  <ng-container *ngIf="dialog">
    <div class="dialog" #scroll (scroll)="scrollTop()">
      <ng-container *ngFor="let message of dialog; let i = index">
        <div class="date-separator" *ngIf="i == 0">
          {{message.timestamp | date : 'mediumDate'}}
        </div>
        <app-message [id]="message.id"
                     [message]="message"
                     (visible)="onMessageVisible($event)"
                     [messageId]="message.id"
                     [sendFromUser]="message.send_from_id == authUser.id ? authUser : otherUser"
                     [isAuthUserSend]="message.send_from_id == authUser.id"
        ></app-message>
        <div *ngIf="isShowDateSeparator(message.timestamp, dialog[i+1]?.timestamp)" class="date-separator">
          {{dialog[i+1]?.timestamp | date : 'mediumDate'}}
        </div>
      </ng-container>
    </div>
  </ng-container>
  <div class="send-message">
    <textarea rows="1" [formControl]="messageControl"
          (keyup.enter)="sendMessage()" class="send-message__input"></textarea>
    <div (click)="sendMessage()" class="send-message__send"></div>
  </div>
</div>
